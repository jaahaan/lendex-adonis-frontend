(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{324:function(e,t,r){"use strict";r.r(t);var o=r(2),n=(r(31),r(20),{components:{quillEditor:r(263).quillEditor},data:function(){return{loading:!1,sending:!1,formValue:{id:0,image:"",title:"",subtitle:"",description:"",project_name:"",clients:"",duration:"",date:""},errorMessages:{title:"",subtitle:"",project_name:""},editorOption:{},http:"http://127.0.0.1:3333/uploads/",modalImageUrl:"",visible:!1}},methods:{handleView:function(e){this.modalImageUrl=e,this.visible=!0},handleSuccess:function(e,t){e="".concat(e),this.formValue.image=e},handleError:function(e,t){this.$Notice.warning({title:"The file format is incorrect",desc:"".concat(t.errors.file.length?t.errors.file[0]:"Something went wrong!")})},handleFormatError:function(e){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+e.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(e){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+e.name+" is too large, no more than 2M."})},handleRemove:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.formValue.image,e.formValue.image="",t.next=4,e.callApi("post","/app/delete_image",{imageName:r});case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()},onEditorChange:function(e){e.quill;var html=e.html;e.text;this.formValue.description=html},save:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!0,e.clearErrorMessages(),""==e.formValue.title.trim()&&(e.errorMessages.title="Title is required!",r=!1),""==e.formValue.subtitle.trim()&&(e.errorMessages.subtitle="Subtitle is required!",r=!1),""==e.formValue.project_name.trim()&&(e.errorMessages.project_name="Project Name is required!",r=!1),0!=r){t.next=7;break}return t.abrupt("return",e.$Message.error("Validation Fail!"));case 7:return e.loading=!0,t.next=10,e.callApi("put","/app/update_project",e.formValue);case 10:if(200===(o=t.sent).status||201==o.status)e.loading=!1,e.s("Updated successfully!"),e.$router.push("/projects");else if(422==e.status)for(n in response.data)e.e(response.data[n]);else e.loading=!1,e.swr();case 12:case"end":return t.stop()}}),t)})))()},clearErrorMessages:function(){this.errorMessages={title:"",icon:""}},getDetail:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.callApi("get","/app/get_project/".concat(e.$route.params.id));case 3:200==(r=t.sent).status?e.formValue=r.data:e.swr(),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDetail();case 2:case"end":return t.stop()}}),t)})))()}}),l=r(26),component=Object(l.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",[t("Breadcrumb",[t("BreadcrumbItem",{attrs:{to:"/"}},[e._v("Dashboard")]),e._v(" "),t("BreadcrumbItem",{attrs:{to:"/projects"}},[e._v("Projects")]),e._v(" "),t("BreadcrumbItem",[e._v("Edit Project")])],1)],1),e._v(" "),t("div",{staticClass:"common-page-card"},[t("Form",[t("Row",{attrs:{gutter:24}},[t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"Title",error:e.errorMessages.title,required:!0}},[t("Input",{attrs:{type:"text",placeholder:"Title"},model:{value:e.formValue.title,callback:function(t){e.$set(e.formValue,"title",t)},expression:"formValue.title"}})],1)],1),e._v(" "),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"Subtitle",error:e.errorMessages.subtitle,required:!0}},[t("Input",{attrs:{type:"text",placeholder:"Subtitle"},model:{value:e.formValue.subtitle,callback:function(t){e.$set(e.formValue,"subtitle",t)},expression:"formValue.subtitle"}})],1)],1),e._v(" "),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"Project Name",error:e.errorMessages.project_name,required:!0}},[t("Input",{attrs:{type:"text",placeholder:"Project Name"},model:{value:e.formValue.project_name,callback:function(t){e.$set(e.formValue,"project_name",t)},expression:"formValue.project_name"}})],1)],1),e._v(" "),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"Clients"}},[t("Input",{attrs:{type:"text",placeholder:"clients"},model:{value:e.formValue.clients,callback:function(t){e.$set(e.formValue,"clients",t)},expression:"formValue.clients"}})],1)],1),e._v(" "),t("Col",{attrs:{span:"24"}},[t("h4",{staticStyle:{"margin-bottom":"10px"}},[e._v("Description")])]),e._v(" "),t("Col",{attrs:{span:"24"}},[t("div",{staticClass:"quil-editor",staticStyle:{"min-height":"150px"}},[t("quill-editor",{ref:"myQuillEditor",attrs:{autosize:{minRows:15,maxRows:20},options:e.editorOption},on:{change:function(t){return e.onEditorChange(t)}},model:{value:e.formValue.description,callback:function(t){e.$set(e.formValue,"description",t)},expression:"formValue.description"}})],1)]),e._v(" "),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"Duration"}},[t("Input",{attrs:{type:"text",placeholder:"Duration"},model:{value:e.formValue.duration,callback:function(t){e.$set(e.formValue,"duration",t)},expression:"formValue.duration"}})],1)],1),e._v(" "),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"Date"}},[t("DatePicker",{staticClass:"d-block",attrs:{type:"date",placeholder:"Date"},model:{value:e.formValue.date,callback:function(t){e.$set(e.formValue,"date",t)},expression:"formValue.date"}})],1)],1),e._v(" "),t("Col",{attrs:{span:"24"}},[e.formValue.image?t("div",{staticClass:"demo-upload-list"},[t("img",{attrs:{src:"".concat(e.http+e.formValue.image)}}),e._v(" "),t("div",{staticClass:"demo-upload-list-cover"},[t("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleRemove.apply(null,arguments)}}}),e._v(" "),t("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleView("".concat(e.http+e.formValue.image))}}})],1)]):e.formValue.image?e._e():t("div",{staticClass:"mt-3 mb-3"},[t("Upload",{ref:"formValueUploads",staticClass:"upload",attrs:{type:"drag","on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":20048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,action:"/app/upload"}},[t("div",{staticClass:"camera-icon"},[t("Icon",{attrs:{type:"ios-camera",size:"20"}}),e._v("\n                Upload Image\n              ")],1)])],1)]),e._v(" "),t("Col",{attrs:{span:"24"}},[t("Button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/projects")}}},[e._v("Cancel")]),t("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1),e._v(" "),t("Modal",{attrs:{title:"View Image"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?t("img",{staticStyle:{width:"100%"},attrs:{src:e.modalImageUrl}}):e._e()])],1)}),[],!1,null,null,null);t.default=component.exports}}]);